(this["webpackJsonpreact-projeto-base"]=this["webpackJsonpreact-projeto-base"]||[]).push([[0],{73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(12),s=n.n(a),i=n(9);n(22),n(18),n(32),n(33);var o="https://app-despesas-build-backend.herokuapp.com";function l(e,t){return fetch("".concat(o,"/despesas?mes=").concat(e,"-").concat(t),{credentials:"include"}).then(d)}function d(e){if(e.ok)return e.json();throw new Error(e.statusText)}var j=n(1);function b(e){var t=e.value,n=void 0===t?"op1":t,c=e.label,r=void 0===c?"Descri\xe7\xe3o do Select":c,a=e.onChange,s=void 0===a?null:a,i=e.children,o=void 0===i?[{id:"op1",description:"Op\xe7\xe3o 1"},{id:"op2",description:"Op\xe7\xe3o 2"}]:i;return Object(j.jsxs)("div",{className:"text-center mb-4",children:[Object(j.jsx)("label",{className:"label flex flex-row justify-center",children:Object(j.jsx)("span",{className:"label-text dark:text-white",children:r})}),Object(j.jsx)("select",{className:"mr-2 border px-1 py-2 bg-light",label:r,value:n,onChange:function(e){var t=e.currentTarget;s&&s(t.value)},children:o.map((function(e){var t=e.id,n=e.description;return Object(j.jsx)("option",{value:t,children:n},t)}))})]})}function u(e){var t=e.cost;return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t.despesa}),Object(j.jsx)("td",{children:t.categoria}),Object(j.jsx)("td",{children:t.dia}),Object(j.jsx)("td",{children:"".concat(t.valor.toLocaleString("PT"))})]},t.id)}function h(e){var t=e.children,n=e.labels,c=void 0===n?[{id:"op1",description:"Label 1"},{id:"op2",description:"Label 2"},{id:"op3",description:"Label 3"},{id:"op4",description:"Label 4"}]:n;return Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsx)("tr",{children:c.map((function(e){return Object(j.jsx)("th",{scope:"col",children:e.description},e.id)}))})}),Object(j.jsx)("tbody",{children:t})]})}function p(e){var t=e.costs.reduce((function(e,t){return e+t.valor}),0);return Object(j.jsxs)("h3",{className:"float-right",children:["Despesa Total: ",Object(j.jsx)("strong",{children:"R$ ".concat(t.toLocaleString("PT"))})]})}var m=n(3),O=[{id:"01",description:"Janeiro"},{id:"02",description:"Fevereiro"},{id:"03",description:"Mar\xe7o"},{id:"04",description:"Abril"},{id:"05",description:"Maio"},{id:"06",description:"Junho"},{id:"07",description:"Julho"},{id:"08",description:"Agosto"},{id:"09",description:"Setembro"},{id:"10",description:"Outubro"},{id:"11",description:"Novembro"},{id:"12",description:"Dezembro"}];var x=[{id:"2020",description:"2020"},{id:"2021",description:"2021"}];var f={despesas:[],year:"2020",month:"06",error:""},v=function(e,t){switch(t.type){case"CHANGE_YEAR":return{year:t.year};case"FETCH_SUCCESS":return{despesas:t.payload,year:t.year,month:t.month,error:""};default:return e}};function g(){var e=Object(m.g)(),t=Object(c.useReducer)(v,f),n=Object(i.a)(t,2),r=n[0],a=n[1];Object(c.useEffect)((function(){l(f.year,r.month).then((function(e){a({type:"FETCH_SUCCESS",payload:e.sort((function(e,t){return e.dia-t.dia})),year:f.year,month:f.month})}))}),[]);var s=r.despesas.map((function(e){var t=e.id,n=e.descricao,c=e.categoria,r=e.valor;return{id:t,despesa:n,categoria:c,dia:e.dia,valor:r}}));return Object(j.jsxs)("div",{className:"container pt-0 pr-5 pb-5 pl-5",children:[Object(j.jsxs)("div",{className:"pb-2 pl-2 pr-2 pt-0 mt-0 mb-4",children:[Object(j.jsx)(p,{costs:s}),Object(j.jsxs)("form",{className:"d-flex flex-row",children:[Object(j.jsx)(b,{label:"Ano",value:r.year,onChange:function(t){l(t,r.month).then((function(n){a({type:"FETCH_SUCCESS",payload:n.sort((function(e,t){return e.dia-t.dia})),year:t,month:r.month}),e.push("/despesas/".concat(t,"-").concat(r.month))}))},children:x}),Object(j.jsx)(b,{label:"M\xeas",value:r.month,onChange:function(t){l(r.year,t).then((function(n){a({type:"FETCH_SUCCESS",payload:n.sort((function(e,t){return e.dia-t.dia})),year:r.year,month:t}),e.push("/despesas/".concat(r.year,"-").concat(t))}))},children:O})]})]}),Object(j.jsx)(h,{labels:[{id:"01",description:"Despesa"},{id:"02",description:"Categoria"},{id:"03",description:"Dia"},{id:"04",description:"Valor (R$)"}],children:s.map((function(e){return Object(j.jsx)(u,{cost:e},e.id)}))})]})}var y=n(14),N=n(87),S=Object(N.a)({error:{backgroundColor:"rgb(253, 236, 234)",margin:"16px 0",padding:"16px"}});function C(e){var t=S(),n=Object(c.useState)("usuario@email.com"),r=Object(i.a)(n,2),a=r[0],s=r[1],l=Object(c.useState)("1234"),b=Object(i.a)(l,2),u=b[0],h=b[1],p=Object(c.useState)(""),m=Object(i.a)(p,2),O=m[0],x=m[1];return Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsx)("div",{className:"container mx-auto",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"col-xl-5 col-lg-7 col-md-10 col-sm-10 col-12 mt-5 p-5 mx-auto d-block",children:[Object(j.jsx)("h1",{className:"h1",children:"Agenda React"}),Object(j.jsx)("p",{className:"my-2",children:"Digite e-mail e senha para entrar no sistema."}),Object(j.jsxs)("p",{children:["Para testar use o e-mail:"," ",Object(j.jsx)("kbd",{children:"usuario@email.com"})," e a senha ",Object(j.jsx)("kbd",{children:"1234"})]}),Object(j.jsx)("form",{onSubmit:function(t){t.preventDefault(),function(e,t){return fetch("".concat(o,"/sessao/criar"),{method:"POST",credentials:"include",body:JSON.stringify({email:e,senha:t}),headers:{"Content-type":"application/json"}}).then(d)}(a,u).then((function(t){e.onSignIn(t)}),(function(e){x("E-mail n\xe3o encontrado ou senha incorreta."),console.error(e)}))},children:Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsxs)("div",{className:"input-group d-block",children:[Object(j.jsxs)("label",{htmlFor:"email",className:"d-block my-2",children:["E-mail:",Object(j.jsx)("input",{type:"email",id:"email",name:"email",className:"form-control",value:a,onChange:function(e){s(e.target.value)}})]}),Object(j.jsxs)("label",{htmlFor:"password",className:"d-block my-2",children:["Senha:",Object(j.jsx)("input",{type:"password",id:"password",name:"password",className:"form-control",value:u,onChange:function(e){h(e.target.value)}})]})]}),O&&Object(j.jsx)("div",{className:t.error,children:O}),Object(j.jsx)("div",{className:"d-flex flex-row-reverse",children:Object(j.jsx)("button",{type:"submit",className:"btn btn-primary mt-2 align-right",children:"Entrar"})})]})})]})})})})}var w=n(88),E=r.a.createContext({user:{name:"An\xf4nimo",email:""},removeUser:function(){}}),k=r.a.memo((function(e){var t=e.user,n=Object(c.useState)(null),r=Object(i.a)(n,2),a=r[0],s=r[1],l=Boolean(a),b=Object(c.useContext)(E).removeUser,u=Object(m.g)();return Object(j.jsx)("div",{className:"container  pt-3 pr-5 pb-0 mb-0 mt-2",children:Object(j.jsxs)("div",{className:"d-flex flex-row-reverse mt-0 mb-4",children:[Object(j.jsxs)("button",{type:"button",onClick:function(e){s(a?null:e.currentTarget)},className:"btn btn-secondary",children:[Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-person d-inline mb-1 mr-1",viewBox:"0 0 16 16",children:Object(j.jsx)("path",{d:"M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"})}),Object(j.jsx)("span",{className:"d-inline mr-1",children:Object(j.jsx)("strong",{children:t.nome})})]}),Object(j.jsx)(w.a,{id:l?"simple-popper":void 0,open:l,anchorEl:a,children:Object(j.jsx)("div",{className:"border p-2 bg-light",children:Object(j.jsx)("button",{type:"button",className:"btn btn-warning",onClick:function(){u.push("/despesas/2020-06"),fetch("".concat(o,"/sessao/finalizar"),{method:"POST",credentials:"include"}).then(d).then((function(){b(null),s(null)}))},children:"Log-out"})})})]})})}));function T(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){fetch("".concat(o,"/sessao/usuario"),{credentials:"include"}).then(d).then((function(e){return r(e)}),(function(){return r(null)}))}),[]),n?Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(E.Provider,{value:{removeUser:r},children:Object(j.jsx)(y.a,{children:Object(j.jsxs)(m.d,{children:[Object(j.jsxs)(m.b,{children:[Object(j.jsx)(k,{user:n}),Object(j.jsx)(g,{})]}),Object(j.jsx)(m.a,{to:{pathname:"despesas/2020-06"}})]})})})}):Object(j.jsx)(C,{onSignIn:r})}n(73);s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(T,{})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.9b8adb83.chunk.js.map