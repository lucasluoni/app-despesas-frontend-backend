{"version":3,"sources":["app/services/apiService.js","app/components/Select.jsx","app/components/TableRow.jsx","app/components/Table.jsx","app/components/TotalCosts.jsx","app/helpers/dateHelpers.js","app/pages/AppScreen.jsx","app/pages/LoginScreen.jsx","app/AuthContext.jsx","app/components/UserMenu.jsx","app/App.jsx","index.js"],"names":["BACK_END_URL","apiGetCostsData","year","month","fetch","credentials","then","handleResponse","resp","ok","json","Error","statusText","Select","value","label","onChange","children","options","id","description","className","currentTarget","map","TableRow","cost","despesa","categoria","dia","valor","toLocaleString","Table","labels","scope","TotalCosts","totalCosts","costs","reduce","total","MONTHS","YEARS","initialState","despesas","error","reducer","state","action","type","payload","AppScreen","history","useHistory","useReducer","dispatch","useEffect","results","sort","a","b","descricao","evt","push","useStyles","makeStyles","backgroundColor","margin","padding","LoginScreen","props","classes","useState","email","setEmail","password","setPassword","setError","onSubmit","preventDefault","senha","method","body","JSON","stringify","headers","signInEndpoint","user","onSignIn","e","console","htmlFor","name","target","authContext","React","createContext","removeUser","UserMenu","memo","anchorEl","setAnchorEl","open","Boolean","useContext","onClick","event","xmlns","width","height","fill","viewBox","d","nome","Popper","undefined","App","setUser","result","Provider","to","pathname","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9b8adb83.chunk.js","sourcesContent":["// apiService para regras de negócio do back end\nimport { get } from './httpService'\n\nconst BACK_END_URL =\n  process.env.NODE_ENV === 'development' ?\n    'http://localhost:3001' :\n    'https://json-server-despesas.herokuapp.com' \n\nexport function apiGetCostsData(year, month) {\n  return fetch(`${BACK_END_URL}/despesas?mes=${year}-${month}`,{\n    credentials: 'include',\n  }).then(handleResponse)\n}\n\n// precisamos passar um parâmetro no objeto ‘options’ (de todas as requisições de login)  \n// para indicar que as credenciais sejam salvas ou atualizadas e o cookie da sessão seja salvo no browser\n\n// o endpoint de login recebe email e senha (como parâmetros) para enviar ao servidor\nexport function signInEndpoint(email, senha) {\n  return fetch(`${BACK_END_URL}/sessao/criar`, {\n    // a requisição é feita com o método POST\n    method: 'POST',\n    // vai enviar os cookies, aceita os headers setCookie e definir o cookie na página\n    credentials: 'include',\n    // temos q enviar o corpo como JSON\n    body: JSON.stringify({email, senha}),\n    headers: {\n      'Content-type': 'application/json',\n    },\n    // o endpoint vai enviar como corpo da requisição um objeto com login e senha\n  }).then(handleResponse)\n}\n\n// fazer um post pro endpoint de login\nexport function getUserEndpoint() {\n  return fetch(`${BACK_END_URL}/sessao/usuario`, {\n    // vai enviar os cookies, aceita os headers setCookie e definir o cookie na página\n    credentials: 'include',\n  }).then(handleResponse)\n}\n\n// endpoint para logout da aplicação\nexport function signOut() {\n  return fetch(`${BACK_END_URL}/sessao/finalizar`, {\n    method: \"POST\",\n    // vai enviar os cookies, aceita os headers setCookie e definir o cookie na página\n    credentials: \"include\",\n  }).then(handleResponse);\n}\n\nfunction handleResponse(resp) {\n  if (resp.ok) {\n    return resp.json()\n  } else {\n    throw new Error(resp.statusText)\n  } \n}","export default function Select({\n  value = 'op1',\n  label = 'Descrição do Select',\n  onChange = null,\n  children: options = [\n    { id: 'op1', description: 'Opção 1' },\n    { id: 'op2', description: 'Opção 2' },\n  ],\n}) {\n  function handleSelectChange({ currentTarget }) {\n    if (onChange) {\n      onChange(currentTarget.value)\n    }\n  }\n\n  return (\n    <div className='text-center mb-4'>\n\n      <label className='label flex flex-row justify-center'>\n        <span className='label-text dark:text-white'>\n          {label}\n        </span>\n      </label>    \n\n      <select \n        className='mr-2 border px-1 py-2 bg-light' \n        label={label}\n        value={value} \n        onChange={handleSelectChange}\n      >\n        {options.map(({ id, description }) => {\n          return (\n            <option key={id} value={id}>\n              {description}\n            </option>\n          )\n        })}\n      </select>\n\n    </div>\n  )\n}","import React from 'react'\n\nexport default function TableRow({cost}) {\n\n  return (\n    <tr key={cost.id}>\n      <td>{cost.despesa}</td>\n      <td>{cost.categoria}</td>\n      <td>{cost.dia}</td>\n      <td>{`${cost.valor.toLocaleString('PT')}`}</td>\n    </tr>\n  )\n}","import React from 'react'\n\nexport default function Table({\n  children,\n  labels = [\n    { id: 'op1', description: 'Label 1' },\n    { id: 'op2', description: 'Label 2' },\n    { id: 'op3', description: 'Label 3' },\n    { id: 'op4', description: 'Label 4' },\n  ],\n}){\n  return (\n    <table className=\"table\">\n    \n    <thead>\n      <tr>\n        {labels.map((label) => {\n          return (\n            <th scope=\"col\" key={label.id}>{label.description}</th>\n          )\n        })}\n      </tr>\n    </thead>\n\n    <tbody>\n      {children}\n    </tbody>\n\n  </table>      \n)}\n","import React from 'react'\n\nexport default function TotalCosts({costs}) {\n\n  const totalCosts = costs.reduce((total, cost) => {\n    return total += cost.valor\n  }, 0)\n  return (\n    <h3 className=\"float-right\">Despesa Total: <strong>{`R$ ${totalCosts.toLocaleString('PT')}`}</strong></h3>\n  )\n}","export const MONTHS = [\n  {\n    id: '01',\n    description: 'Janeiro'}, \n  {\n    id: '02',\n    description: 'Fevereiro'}, \n  {\n    id: '03',\n    description: 'Março'}, \n  {\n    id: '04',\n    description: 'Abril'}, \n  {\n    id: '05',\n    description: 'Maio'}, \n  {\n    id: '06',\n    description: 'Junho'}, \n  {\n    id: '07',\n    description: 'Julho'}, \n  {\n    id: '08',\n    description: 'Agosto'}, \n  {\n    id: '09',\n    description: 'Setembro'}, \n  {\n    id: '10',\n    description: 'Outubro'}, \n  {\n    id: '11',\n    description: 'Novembro'}, \n  {\n    id: '12',\n    description: 'Dezembro'}\n]\n\nexport function firstYearAvailableMonths() {\n  const firstYearAvailableMonths = MONTHS.filter((month) => month.id > '05')\n  return firstYearAvailableMonths\n}\n\nexport function secondYearAvailableMonths() {\n  const secondYearAvailableMonths = MONTHS.filter((month) => month.id < '07')\n  return secondYearAvailableMonths\n}\n\nexport const YEARS = [\n  {\n    id: '2020',\n    description: '2020'\n  },\n  {\n    id: '2021',\n    description: '2021'\n  },\n]\n\nexport function helperYearsArray() {\n  return YEARS\n}\n\n","import React, {useState, useEffect, useReducer} from 'react'\nimport 'bootstrap/dist/css/bootstrap.css';\nimport {apiGetCostsData} from './../services/apiService'\n\nimport Select from './../components/Select'\nimport TableRow from '../components/TableRow';\nimport Table from '../components/Table';\nimport TotalCosts from '../components/TotalCosts';\n\nimport { useHistory, useParams } from \"react-router-dom\";\n\nimport {\n  firstYearAvailableMonths,\n  secondYearAvailableMonths,\n  helperYearsArray,\n  MONTHS,\n  YEARS\n} from './../helpers/dateHelpers'\n\n\nconst initialState = {\n  despesas: [],\n  year: '2020',\n  month: '06',\n  error: ''\n}\n\nconst reducer = (state, action) => {\n\tswitch (action.type) {\n    case 'CHANGE_YEAR':\n\t\t\treturn {\n        year: action.year\n      }\n\t\tcase 'FETCH_SUCCESS':\n\t\t\treturn {\n\t\t\t\t// loading: false,\n        despesas: action.payload,\n        year: action.year,\n        month: action.month,\n\t\t\t\terror: ''\n      }\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport default function AppScreen() {\n\n  const history = useHistory()\n\n  const [state, dispatch] = useReducer(reducer, initialState)\n\n\tuseEffect(() => {\n      apiGetCostsData(initialState.year, state.month).then((results) => {\n        dispatch({ \n          type: 'FETCH_SUCCESS', \n          payload: results.sort((a, b) => a.dia - b.dia),\n          year: initialState.year,\n          month: initialState.month,\n        })\n      })\n  }, [])\n\n  const costs = state.despesas.map(({id, descricao, categoria, valor, dia}) => ({id, despesa: descricao, categoria, dia, valor}))\n\n  const labels = [\n    {'id': '01', 'description': 'Despesa'}, \n    {'id': '02', 'description': 'Categoria'}, \n    {'id': '03', 'description': 'Dia'}, \n    {'id': '04', 'description': 'Valor (R$)'}\n  ]\n\n  const handleYearChange = (evt) => {\n    apiGetCostsData(evt, state.month).then((results) => {\n      dispatch({ \n        type: 'FETCH_SUCCESS', \n        payload: results.sort((a, b) => a.dia - b.dia),\n        year: evt,\n        month: state.month,\n      })\n      history.push(`/despesas/${evt}-${state.month}`)\n    })\n  }\n  \n  const handleMonthChange = (evt) => {\n    apiGetCostsData(state.year, evt).then((results) => {\n      dispatch({ \n        type: 'FETCH_SUCCESS', \n        payload: results.sort((a, b) => a.dia - b.dia),\n        year: state.year,\n        month: evt\n      })\n      history.push(`/despesas/${state.year}-${evt}`)\n    })\n  }\n\n  return (\n    <div className='container pt-0 pr-5 pb-5 pl-5'>\n     \n      <div className='pb-2 pl-2 pr-2 pt-0 mt-0 mb-4'>          \n        <TotalCosts costs={costs} />\n          \n          <form className=\"d-flex flex-row\">          \n          <Select \n            label='Ano'\n            value={state.year} \n            onChange={handleYearChange}\n          > \n            {YEARS} \n          </Select>\n          <Select \n            label='Mês'\n            value={state.month} \n            onChange={handleMonthChange}\n          >\n            {MONTHS} \n          </Select>\n          </form>\n      </div>\n\n      <Table labels={labels}>\n        {costs.map((cost) => (\n          <TableRow key={cost.id} cost={cost} />\n        ))}\n      </Table>\n\n    </div>\n  )\n}\n","import React, { useState } from 'react'\nimport 'bootstrap/dist/css/bootstrap.css';\nimport { signInEndpoint } from '../services/apiService';\nimport { makeStyles } from '@material-ui/core'\n\n\nconst useStyles = makeStyles({\n  error: {\n    backgroundColor: 'rgb(253, 236, 234)',\n    margin: '16px 0',\n    padding: '16px'\n  }\n})\n\nexport default function LoginScreen(props) {\n  const classes = useStyles()\n  const [email, setEmail] = useState('usuario@email.com')\n  const [password, setPassword] = useState('1234')\n  // estado para armazenar o erro no login\n  const [error, setError] = useState('')\n  \n  // recebe o user do pai (App)\n  const onSignIn = (user) => {}\n\n  function signIn(evt) {\n    evt.preventDefault()\n    // vamos chamar o signInEndpoint\n    signInEndpoint(email, password).then(\n      (user) => {\n        props.onSignIn(user)\n      },\n      (e) => {\n        setError('E-mail não encontrado ou senha incorreta.')\n        console.error(e)\n      }\n    )\n  }\n\n  return (\n    <div className='container-fluid'>\n      <div className='container mx-auto'>\n        <div className=\"row\">\n        \n          <div className=\"col-xl-5 col-lg-7 col-md-10 col-sm-10 col-12 mt-5 p-5 mx-auto d-block\">\n            <h1 className='h1'>Agenda React</h1>\n            <p className='my-2'>Digite e-mail e senha para entrar no sistema.</p> \n            <p>Para testar use o e-mail: \n            {' '}<kbd>usuario@email.com</kbd> e a senha <kbd>1234</kbd>\n            </p>\n            <form onSubmit={signIn}>\n                <div className=\"form-group\">\n                <div className='input-group d-block'>\n                  <label htmlFor='email' className='d-block my-2'>E-mail:\n                  <input type='email' id='email' name='email' className='form-control' value={email} onChange={(evt) => {setEmail(evt.target.value)}}></input>\n                  </label>\n                  <label htmlFor='password' className='d-block my-2'>Senha:\n                  <input type='password' id='password' name='password' className='form-control' value={password} onChange={(evt) => {setPassword(evt.target.value)}}></input>\n                  </label>\n                </div>\n                {error && <div className={classes.error}>{error}</div>}\n                <div className='d-flex flex-row-reverse'>\n                  <button type=\"submit\" className=\"btn btn-primary mt-2 align-right\">Entrar</button>\n                </div> \n              </div>       \n            </form>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\n\n// export const userContext = React.createContext({\n//   name: 'Anônimo',\n//   email: ''\n// })\n\nexport const authContext = React.createContext({\n  user: {\n    name: 'Anônimo',\n    email: ''\n  },\n  removeUser: () => {},\n})","import React, { useState } from 'react'\nimport Popper from '@material-ui/core/Popper';\nimport {signOut} from './../services/apiService'\nimport { useContext } from 'react';\nimport { authContext } from '../AuthContext';\nimport { useHistory } from \"react-router-dom\";\n\nexport const UserMenu = React.memo(function ({user}) {\n  const [anchorEl, setAnchorEl] = useState(null)\n  const open = Boolean(anchorEl)\n  const {removeUser} = useContext(authContext)\n\n  const handleClick = (event) => {\n    setAnchorEl(anchorEl ? null : event.currentTarget)\n  }\n\n  const history = useHistory()\n\n  function onSignOut() {\n    history.push(`/despesas/2020-06`)\n    signOut().then(() => {\n      removeUser(null)\n      setAnchorEl(null)\n    })\n  }\n\n  return (\n    <div className='container  pt-3 pr-5 pb-0 mb-0 mt-2'>  \n      <div className='d-flex flex-row-reverse mt-0 mb-4'>\n\n        <button type=\"button\" onClick={handleClick} className=\"btn btn-secondary\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-person d-inline mb-1 mr-1\" viewBox=\"0 0 16 16\">\n            <path d=\"M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z\"/>\n          </svg>\n          <span className='d-inline mr-1'><strong>{user.nome}</strong></span>\n        </button>\n        \n        <Popper\n          id={open ? 'simple-popper' : undefined}\n          open={open}\n          anchorEl={anchorEl}\n        >\n          <div className='border p-2 bg-light'>\n            <button type=\"button\" className=\"btn btn-warning\" onClick={onSignOut}>Log-out</button>\n          </div>\n        </Popper>\n\n      </div>\n    </div>\n  )\n})\n","import AppScreen from './pages/AppScreen'\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\n\nimport {useState, useEffect} from 'react'\nimport {getUserEndpoint} from './services/apiService'\nimport LoginScreen from './pages/LoginScreen';\nimport {UserMenu} from './components/UserMenu';\nimport { authContext } from './AuthContext'\n\n\nexport default function App() {\n\n  // a variável 'user' armazenada nesse estado vai nos indicar se o usuário esta logado\n  const [user, setUser] = useState(null)\n\n  useEffect(() => {\n    getUserEndpoint().then(\n      // definimos o user como o resultado da promisse\n      (result) => setUser(result),\n      // se a promisse for rejeitada damos marcamos o estado como null\n      () => setUser(null),\n    )\n  }, [])\n\n  //  if (user !== null) redireciona para a aplicação\n  if(user) {\n    return (\n      <>\n      <authContext.Provider value={{removeUser: setUser}}>\n      {/* agora qualquer componente descendente tem acesso ao valor de 'user' por meio do hook useContext */}\n      <Router>\n          <Switch>\n              {/* <Route path='/despesas/:mes'> */}\n            <Route>\n              <UserMenu user={user} />\n              <AppScreen />\n            </Route>\n            <Redirect to={{ pathname: 'despesas/2020-06'}} />\n          </Switch>\n        </Router>\n      </authContext.Provider>\n      </>\n    );\n    //  if (user === null) redireciona para a tela de login\n  } else {\n    return <LoginScreen onSignIn={setUser} />\n  }\n  \n  \n}\n","/**\n * Importação do módulo principal do React.\n * A partir da versão 17.x, não é mais obrigatório\n * para criar componentes. Entretanto, a importação\n * é necessária neste arquivo pois \"React\" é de fato\n * utilizado com StrictMode\n */\nimport React from 'react';\n\n/**\n * Este é o módulo do React que renderiza HTML.\n * Em mobile temos, por exemplo, o react-native\n */\nimport ReactDOM from 'react-dom';\n\n/**\n * Importação do componente principal\n * da aplicação\n */\nimport App from './app/App'\n\n/**\n * Este arquivo pode ser considerado o CSS\n * Global do App. Perceba a peculiaridade da\n * sintaxe de importação\n */\nimport './index.css';\n\n/**\n * <React.StrictMode> é utilizado na fase\n * de \"Desenvolvimento\" gerando mais mensagens\n * de erro para apoiar o Desenvolvedor. Por isso\n * é comum ocorrerem renderizações \"a mais\".\n * Ele é retirado automaticamente em produção.\n */\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}